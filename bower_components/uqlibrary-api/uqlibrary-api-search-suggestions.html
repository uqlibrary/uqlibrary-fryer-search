<link rel="import" href="elements.html">

<!--
Element providing search suggestions.

##### Example

    <uqlibrary-api-search-suggestions></uqlibrary-api-search-suggestions>

@element uqlibrary-api-search-suggestions
@blurb Element providing search suggestions.
@status alpha
@homepage https://github.com/uqlibrary/uqlibrary-api
-->
<dom-module id="uqlibrary-api-search-suggestions">
  <template>
    <uqlibrary-api id="suggestions"></uqlibrary-api>
  </template>
  <script>
    (function () {
      Polymer({
        is: 'uqlibrary-api-search-suggestions',
        properties: {
          /**
           * Fired when the object has loaded.
           *
           * @event uqlibrary-api-search-suggestions-loaded
           */
          baseUri: {
            type: String,
            value: '/search_suggestions'
          },
          type: {
            type: String,
            value: '',
            notify: true
          }
        },
        created: function () {
        },
        ready: function () {
          var that = this;
          this.$.suggestions.addEventListener('uqlibrary-api', function (e) {
            that.fire('uqlibrary-api-search-suggestions-loaded', e.detail);
          });
        },
        /**
         * Gets the search suggestions.
         *
         * @method get
         */
        get: function (text) {
          if (this.type != '' && typeof text !== 'undefined' && text.trim() != '') {
            this.set('$.suggestions.uri', this.baseUri + '?type=' + this.type + '&prefix=' + text);
            this.$.suggestions.get();
          }
        }
      });
    }());
  </script>
</dom-module>
